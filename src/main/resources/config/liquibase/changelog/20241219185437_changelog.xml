<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-latest.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">
    <changeSet author="Fady (generated)" id="1734634486537-3">
        <createTable tableName="classroom">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="classroomPK"/>
            </column>
            <column name="capacity" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="department_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-4">
        <createTable tableName="department">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="departmentPK"/>
            </column>
            <column name="email" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="institute_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-5">
        <createTable tableName="exam">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="examPK"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="classroom_id" type="BIGINT"/>
            <column name="session_id" type="BIGINT"/>
            <column name="student_class_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-6">
        <createTable tableName="exam_session">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="exam_sessionPK"/>
            </column>
            <column name="allow_combine_classes" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="allow_own_class_supervision" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="allow_parallel_studies" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="end_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="session_code" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="start_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="session_type_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-7">
        <createTable tableName="institute">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="institutePK"/>
            </column>
            <column name="email" type="VARCHAR(255)"/>
            <column name="location" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="logo" type="OID">
                <constraints nullable="false"/>
            </column>
            <column name="logo_content_type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="phone" type="VARCHAR(255)"/>
            <column name="website" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-8">
        <createTable tableName="major">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="majorPK"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="department_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-9">
        <createTable tableName="professor_details">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="professor_detailsPK"/>
            </column>
            <column name="rank" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-10">
        <createTable tableName="rel_exam__supervisors">
            <column name="exam_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="rel_exam__supervisorsPK"/>
            </column>
            <column name="supervisors_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="rel_exam__supervisorsPK"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-11">
        <createTable tableName="rel_exam_session__departments">
            <column name="exam_session_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="rel_exam_session__departmentsPK"/>
            </column>
            <column name="departments_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="rel_exam_session__departmentsPK"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-12">
        <createTable tableName="report">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="reportPK"/>
            </column>
            <column name="content" type="OID"/>
            <column name="created_date" type="TIMESTAMP(6) WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="department_id" type="BIGINT"/>
            <column name="exam_session_id" type="BIGINT"/>
            <column name="institute_id" type="BIGINT"/>
            <column name="professor_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-13">
        <createTable tableName="session_type">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="session_typePK"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-14">
        <createTable tableName="student_class">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="student_classPK"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="student_count" type="INTEGER"/>
            <column name="major_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-15">
        <createTable tableName="teaching_session">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="teaching_sessionPK"/>
            </column>
            <column name="end_hour" type="TIMESTAMP(6) WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="start_hour" type="TIMESTAMP(6) WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="classroom_id" type="BIGINT"/>
            <column name="student_class_id" type="BIGINT"/>
            <column name="timetable_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-16">
        <createTable tableName="timetable">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="timetablePK"/>
            </column>
            <column name="end_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="start_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="professor_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-17">
        <createTable tableName="user_academic_info">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_academic_infoPK"/>
            </column>
            <column name="department_id" type="BIGINT"/>
            <column name="institute_id" type="BIGINT"/>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-18">
        <addUniqueConstraint columnNames="session_type_id" constraintName="UC_EXAM_SESSIONSESSION_TYPE_ID_COL" tableName="exam_session"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-19">
        <addUniqueConstraint columnNames="user_id" constraintName="UC_PROFESSOR_DETAILSUSER_ID_COL" tableName="professor_details"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-20">
        <addUniqueConstraint columnNames="user_id" constraintName="UC_USER_ACADEMIC_INFOUSER_ID_COL" tableName="user_academic_info"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-21">
        <addForeignKeyConstraint baseColumnNames="institute_id" baseTableName="department" constraintName="FK3s53vgjrloqkl2idwq4yjaa6" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="institute" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-22">
        <addForeignKeyConstraint baseColumnNames="departments_id" baseTableName="rel_exam_session__departments" constraintName="FK4tyfr4ll1hx6o1y8exvxkta8w" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="department" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-23">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_academic_info" constraintName="FK4u53wf1ltascdxnxfabf9fife" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="jhi_user" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-24">
        <addForeignKeyConstraint baseColumnNames="department_id" baseTableName="user_academic_info" constraintName="FK5bu72ryx0x3kuwtgriex4kkfq" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="department" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-25">
        <addForeignKeyConstraint baseColumnNames="department_id" baseTableName="major" constraintName="FK5r9k0s8ktwqolvrsgvp31y5gw" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="department" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-26">
        <addForeignKeyConstraint baseColumnNames="student_class_id" baseTableName="exam" constraintName="FK9l98q5h6lp8khicskj7kduinr" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="student_class" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-27">
        <addForeignKeyConstraint baseColumnNames="timetable_id" baseTableName="teaching_session" constraintName="FKaac8n1yneicrx2wapdlwhlio4" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="timetable" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-28">
        <addForeignKeyConstraint baseColumnNames="department_id" baseTableName="report" constraintName="FKbq097kp0442qjxl508ham8h8w" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="department" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-29">
        <addForeignKeyConstraint baseColumnNames="institute_id" baseTableName="report" constraintName="FKdtytuhkua2fwhowm8j99wrqtw" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="institute" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-30">
        <addForeignKeyConstraint baseColumnNames="professor_id" baseTableName="timetable" constraintName="FKedm0y1ds8q8qiqiinbsx89lrr" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="professor_details" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-31">
        <addForeignKeyConstraint baseColumnNames="professor_id" baseTableName="report" constraintName="FKeuyypi7r4ofo1cggos4tx153c" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="professor_details" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-32">
        <addForeignKeyConstraint baseColumnNames="exam_id" baseTableName="rel_exam__supervisors" constraintName="FKf4edvibi5v7ak52fucpg1qjsv" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="exam" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-33">
        <addForeignKeyConstraint baseColumnNames="major_id" baseTableName="student_class" constraintName="FKf4p2c7kjy9c3t9oalhb1g4m81" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="major" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-34">
        <addForeignKeyConstraint baseColumnNames="department_id" baseTableName="classroom" constraintName="FKgwprfqiygm4un9iv2yvcsg00d" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="department" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-35">
        <addForeignKeyConstraint baseColumnNames="classroom_id" baseTableName="exam" constraintName="FKgxddgry2v0hvajhwaexahii0i" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="classroom" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-36">
        <addForeignKeyConstraint baseColumnNames="supervisors_id" baseTableName="rel_exam__supervisors" constraintName="FKhnd6v4wxsh1h3mty15gtiwep0" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="professor_details" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-37">
        <addForeignKeyConstraint baseColumnNames="exam_session_id" baseTableName="rel_exam_session__departments" constraintName="FKhru0668xqbqe4aw6vent4u8ql" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="exam_session" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-38">
        <addForeignKeyConstraint baseColumnNames="institute_id" baseTableName="user_academic_info" constraintName="FKicmy1073o6deb3yxyibln0x6m" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="institute" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-39">
        <addForeignKeyConstraint baseColumnNames="session_type_id" baseTableName="exam_session" constraintName="FKkjfy3b7w2d3vwhgeifdmcnq7m" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="session_type" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-40">
        <addForeignKeyConstraint baseColumnNames="exam_session_id" baseTableName="report" constraintName="FKlstnoh42mikqeot2pgtsjhhna" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="exam_session" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-41">
        <addForeignKeyConstraint baseColumnNames="student_class_id" baseTableName="teaching_session" constraintName="FKmjdfm1ec9hsmy8045k3joetfl" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="student_class" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-42">
        <addForeignKeyConstraint baseColumnNames="classroom_id" baseTableName="teaching_session" constraintName="FKmuslfrqdh3k4omyim57nm82yy" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="classroom" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-43">
        <addForeignKeyConstraint baseColumnNames="session_id" baseTableName="exam" constraintName="FKpy0duu2vvavsr7bl3ice85c3p" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="exam_session" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-44">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="professor_details" constraintName="FKtn463ref9cpxwsgcb99th49ix" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="jhi_user" validate="true"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-45">
        <dropTable tableName="jhi_date_time_wrapper"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-1">
        <modifyDataType columnName="email" newDataType="varchar(254)" tableName="jhi_user"/>
    </changeSet>
    <changeSet author="Fady (generated)" id="1734634486537-2">
        <modifyDataType columnName="login" newDataType="varchar(8)" tableName="jhi_user"/>
    </changeSet>
</databaseChangeLog>
